{"version":3,"file":"popup.js","sources":["../../src/popup/popup.js"],"sourcesContent":["// IframeTube - all rights reserved.\r\n// copyright (c) 2026\r\n// you may copy this project and modify it for personal use only.\r\n// you may not distribute this project or any modified versions of it without explicit permission from the author.\r\n\r\n// view the full source code and how this works here: https://github.com/IframeTube/IframeTube\r\n// if you encounter any issues, please report them here: https://github.com/IframeTube/IframeTube/issues\r\n\r\n// get the tabs\r\nlet tabSettings = document.getElementById(\"tab-settings\");\r\nlet tabIssues = document.getElementById(\"tab-issues\");\r\nlet tabDonate = document.getElementById(\"tab-donate\");\r\n\r\n// get the panels\r\nlet panelSettings = document.getElementById(\"panel-settings\");\r\nlet panelIssues = document.getElementById(\"panel-issues\");\r\nlet panelDonate = document.getElementById(\"panel-donate\");\r\nlet panelLearn = document.getElementById(\"panel-learn\");\r\nlet panelLearn2 = document.getElementById(\"panel-learn-2\");\r\n\r\n// get the buttons\r\nlet buttonToggle = document.getElementById(\"button-toggle\");\r\nlet buttonRate = document.getElementById(\"button-rate\");\r\nlet buttonDonate = document.getElementById(\"button-donate\");\r\nlet buttonLearn = document.getElementById(\"learn-more-button\");\r\nlet buttonNextPage = document.getElementById(\"next-page-button\");\r\n\r\n// add an event listener to each tab\r\ntabSettings.addEventListener(\"click\", () => {\r\n    // disable previous active tabs and panels\r\n    disablePreviousTabPanels();\r\n    // enable the clicked tab and its panel\r\n    tabSettings.classList.add(\"active\");\r\n    panelSettings.classList.add(\"active\");\r\n});\r\n\r\ntabIssues.addEventListener(\"click\", () => {\r\n    disablePreviousTabPanels();\r\n    tabIssues.classList.add(\"active\");\r\n    panelIssues.classList.add(\"active\");\r\n});\r\n\r\ntabDonate.addEventListener(\"click\", () => {\r\n    disablePreviousTabPanels();\r\n    tabDonate.classList.add(\"active\");\r\n    panelDonate.classList.add(\"active\");\r\n});\r\n\r\n// disable all previously active tabs and panels\r\nfunction disablePreviousTabPanels() {\r\n    let active = document.querySelectorAll('.active');\r\n    active.forEach((element) => {\r\n        element.classList.remove(\"active\");\r\n    });\r\n}\r\n\r\n// set the text of the toggle button based on the state\r\nfunction updateTogglebutton(enabled) {\r\n    if (enabled) {\r\n        // enabled message\r\n        buttonToggle.textContent = 'Disable IframeTube'\r\n    }\r\n\r\n    else {\r\n        // disabled message\r\n        buttonToggle.textContent = 'Enable IframeTube'\r\n    }\r\n}\r\n\r\n// init the toggle button state\r\nchrome.storage.local.get(\"IframeTubeEnabled\", (result) => {\r\n    let enabled;\r\n    // if the cookie does not exist, set it to true by default\r\n    if (result.IframeTubeEnabled === undefined) {\r\n        enabled = true;\r\n        chrome.storage.local.set({ \"IframeTubeEnabled\": true });\r\n    }\r\n    // otherwise, use the stored value\r\n    else {\r\n        enabled = result.IframeTubeEnabled;\r\n    }\r\n    // update the button text\r\n    updateTogglebutton(enabled);\r\n});\r\n\r\n// add event listeners to the buttons\r\nbuttonToggle.addEventListener(\"click\", () => {\r\n    // get the current state\r\n    chrome.storage.local.get(\"IframeTubeEnabled\", (result) => {\r\n        let current;\r\n        // if the cookie does not exist, fallback to true\r\n        if (result.IframeTubeEnabled === undefined) {\r\n            current = true;\r\n        }\r\n        // otherwise, use the stored value\r\n        else if (result.IframeTubeEnabled === true) {\r\n            current = true;\r\n        }\r\n        else {\r\n            current = false;\r\n        }\r\n\r\n        // toggle the state (invert it)\r\n        let newState = !current;\r\n\r\n        // save the new state\r\n        chrome.storage.local.set({ \"IframeTubeEnabled\": newState }, () => {\r\n            // update the button text\r\n            updateTogglebutton(newState);\r\n\r\n            // show the reload icon\r\n            let reloadIcon = document.getElementById(\"reload-icon\");\r\n            reloadIcon.style.display = \"inline-block\";\r\n\r\n            // add an event listener to the reload icon\r\n            reloadIcon.addEventListener('click', () => {\r\n                // get all youtube tabs and reload them\r\n                chrome.tabs.query({ url: \"*://*.youtube.com/*\" }, (tabs) => {\r\n                    tabs.forEach((tab) => {\r\n                        chrome.tabs.reload(tab.id);\r\n                        // focus the Youtube tab\r\n                        chrome.tabs.update(tab.id, { active: true });\r\n                    });\r\n                });\r\n                // hide the reload icon after being clicked\r\n                reloadIcon.style.display = 'none'\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n// opens the Chrome Web Store rate page\r\nbuttonRate.addEventListener(\"click\", () => {\r\n    window.open(\"https://chromewebstore.google.com/detail/iframetube-youtube-adbloc/popbfaalnmahdonefnbbogalimefpcnm/reviews\", \"_blank\", \"noopener,noreferrer\");\r\n});\r\n\r\n// shows the learn more panel\r\nbuttonLearn.addEventListener(\"click\", () => {\r\n    tabSettings.classList.remove(\"active\");\r\n    panelSettings.classList.remove(\"active\");\r\n    panelLearn.classList.add(\"active\");\r\n});\r\n\r\n// shows the next page in the learn more panel\r\nbuttonNextPage.addEventListener(\"click\", () => {\r\n    panelLearn.classList.remove(\"active\");\r\n    panelLearn2.classList.add(\"active\");\r\n});\r\n\r\n// opens the donation page (Buy Me A Coffee)\r\nbuttonDonate.addEventListener(\"click\", () => {\r\n    window.open(\"https://www.buymeacoffee.com/iframetube\", \"_blank\", \"noopener,noreferrer\");\r\n});"],"names":["tabSettings","tabIssues","tabDonate","panelSettings","panelIssues","panelDonate","panelLearn","panelLearn2","buttonToggle","buttonRate","buttonDonate","buttonLearn","buttonNextPage","disablePreviousTabPanels","element","updateTogglebutton","enabled","result","current","newState","reloadIcon","tabs","tab"],"mappings":"AASA,IAAIA,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAY,SAAS,eAAe,YAAY,EAChDC,EAAY,SAAS,eAAe,YAAY,EAGhDC,EAAgB,SAAS,eAAe,gBAAgB,EACxDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,eAAe,EAGrDC,EAAe,SAAS,eAAe,eAAe,EACtDC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAe,SAAS,eAAe,eAAe,EACtDC,EAAc,SAAS,eAAe,mBAAmB,EACzDC,EAAiB,SAAS,eAAe,kBAAkB,EAG/DZ,EAAY,iBAAiB,QAAS,IAAM,CAExCa,IAEAb,EAAY,UAAU,IAAI,QAAQ,EAClCG,EAAc,UAAU,IAAI,QAAQ,CACxC,CAAC,EAEDF,EAAU,iBAAiB,QAAS,IAAM,CACtCY,IACAZ,EAAU,UAAU,IAAI,QAAQ,EAChCG,EAAY,UAAU,IAAI,QAAQ,CACtC,CAAC,EAEDF,EAAU,iBAAiB,QAAS,IAAM,CACtCW,IACAX,EAAU,UAAU,IAAI,QAAQ,EAChCG,EAAY,UAAU,IAAI,QAAQ,CACtC,CAAC,EAGD,SAASQ,GAA2B,CACnB,SAAS,iBAAiB,SAAS,EACzC,QAASC,GAAY,CACxBA,EAAQ,UAAU,OAAO,QAAQ,CACrC,CAAC,CACL,CAGA,SAASC,EAAmBC,EAAS,CAC7BA,EAEAR,EAAa,YAAc,qBAK3BA,EAAa,YAAc,mBAEnC,CAGA,OAAO,QAAQ,MAAM,IAAI,oBAAsBS,GAAW,CACtD,IAAID,EAEAC,EAAO,oBAAsB,QAC7BD,EAAU,GACV,OAAO,QAAQ,MAAM,IAAI,CAAE,kBAAqB,EAAI,CAAE,GAItDA,EAAUC,EAAO,kBAGrBF,EAAmBC,CAAO,CAC9B,CAAC,EAGDR,EAAa,iBAAiB,QAAS,IAAM,CAEzC,OAAO,QAAQ,MAAM,IAAI,oBAAsBS,GAAW,CACtD,IAAIC,EAEAD,EAAO,oBAAsB,QAIxBA,EAAO,oBAAsB,GAHlCC,EAAU,GAOVA,EAAU,GAId,IAAIC,EAAW,CAACD,EAGhB,OAAO,QAAQ,MAAM,IAAI,CAAE,kBAAqBC,CAAQ,EAAI,IAAM,CAE9DJ,EAAmBI,CAAQ,EAG3B,IAAIC,EAAa,SAAS,eAAe,aAAa,EACtDA,EAAW,MAAM,QAAU,eAG3BA,EAAW,iBAAiB,QAAS,IAAM,CAEvC,OAAO,KAAK,MAAM,CAAE,IAAK,qBAAqB,EAAKC,GAAS,CACxDA,EAAK,QAASC,GAAQ,CAClB,OAAO,KAAK,OAAOA,EAAI,EAAE,EAEzB,OAAO,KAAK,OAAOA,EAAI,GAAI,CAAE,OAAQ,EAAI,CAAE,CAC/C,CAAC,CACL,CAAC,EAEDF,EAAW,MAAM,QAAU,MAC/B,CAAC,CACL,CAAC,CACL,CAAC,CACL,CAAC,EAGDX,EAAW,iBAAiB,QAAS,IAAM,CACvC,OAAO,KAAK,8GAA+G,SAAU,qBAAqB,CAC9J,CAAC,EAGDE,EAAY,iBAAiB,QAAS,IAAM,CACxCX,EAAY,UAAU,OAAO,QAAQ,EACrCG,EAAc,UAAU,OAAO,QAAQ,EACvCG,EAAW,UAAU,IAAI,QAAQ,CACrC,CAAC,EAGDM,EAAe,iBAAiB,QAAS,IAAM,CAC3CN,EAAW,UAAU,OAAO,QAAQ,EACpCC,EAAY,UAAU,IAAI,QAAQ,CACtC,CAAC,EAGDG,EAAa,iBAAiB,QAAS,IAAM,CACzC,OAAO,KAAK,0CAA2C,SAAU,qBAAqB,CAC1F,CAAC"}